---
description: 'Improve error handling in GraphQL with Sofa. Learn how to add a custom errorHandler function to log and format errors for a better user experience. #GraphQL #Sofa'
---

# Error Handling

By default, Sofa returns a response that includes JSON representation of thrown error object from GraphQL with HTTP status code 500. But, you can enhance error handler by adding your `errorHandler` function.

```typescript
api.use(
  '/api',
  useSofa({
    schema,
    errorHandler(errs) {
      logErrors(errors);
      return new Response(formatError(errs[0]), {
        status: 500,
        headers: { 'Content-Type': 'application/json' },
      });
    },
  })
);
```

## HTTP Error Extensions

Just like GraphQL Yoga's [error handling](https://the-guild.dev/graphql/yoga-server/docs/features/error-masking#modifying-http-status-codes-and-headers) , SOFA respects the status code and headers provided in the error extensions.

```ts filename="GraphQL Error with http extensions." {6-11}
throw new GraphQLError(
  `User with id '${args.byId}' not found.`,
  // error extensions
  {
    extensions: {
      http: {
        status: 400,
        headers: {
          'x-custom-header': 'some-value'
        }
      }
    }
  }
)
```

In this case, you returns a response with `400` status code and `x-custom-header` in the response headers.
